<!DOCTYPE html>
<html lang="en-au">
<head>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.55.6" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://sandcastle.io/css/style.css" type="text/css">
<link rel="stylesheet" href="https://sandcastle.io/css/prism.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="alternate" href="https://sandcastle.io/index.xml" type="application/rss+xml" title="Sandcastle">
<title>HTTPS only with HTTP Strict Transport Security (HTST) header - Sandcastle</title>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WRX2TXJ');</script>

</head>
<body>

<header>
  <div class="container">
    <a class="path" href="https://sandcastle.io/">[Sandcastle]</a>
  </div>
</header>

<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">
    
    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2015-03-11">March 11, 2015</time></span>
    
    
    <span class="key">in</span>
    <span class="val">
        
        <a href="https://sandcastle.io/categories/development">development</a>
        
    </span>
    
    
    <br>
    <span class="key">tags:</span>
    <span class="val">
        
        <a href="https://sandcastle.io/tags/http">http</a>
        
        <a href="https://sandcastle.io/tags/web">web</a>
        
        <a href="https://sandcastle.io/tags/code">code</a>
        
        <a href="https://sandcastle.io/tags/nginx">nginx</a>
        
    </span>
    
  </div>
  <h1 class="headline" itemprop="headline">HTTPS only with HTTP Strict Transport Security (HTST) header</h1>
  <section class="body" itemprop="articleBody">
    

<p>The HTTP Strict Transport Security header (<code>Strict-Transport-Security</code>) allows you to tell the brower to only communicate with a site using HTTPS. Once the browser has successfully connected using HTTPS and seen the header, it will only communicate with the site using HTTPS from that point forward, changing the protocol if needed. By enabling this header you can prevent man-in-the-middle attacks via <a href="https://en.wikipedia.org/wiki/SSL_stripping#SSL_stripping">SSL stripping</a>.</p>

<p>There is a good overview @ <a href="https://developer.mozilla.org/en-US/docs/Security/HTTP_Strict_Transport_Security">Mozilla</a> on the header and its benefits.</p>

<h3 id="browser-support">Browser support</h3>

<p>Most browsers support it with the exception of IE which is coming soon.</p>

<ul>
<li>Chrome (4)</li>
<li>Internet Explorer (IE12)</li>
<li>Firefox (4)</li>
<li>Opera (12)</li>
<li>Safari (Mac OS X 10.9)</li>
</ul>

<h3 id="nginx-example">Nginx example</h3>

<pre><code class="language-nginx">server {
  listen 443 ssl default deferred;
  server_name site.com;

  ssl_certificate /etc/nginx/ssl/site_com.crt;
  ssl_certificate_key /etc/nginx/ssl/site_com.key;

  # Enable HSTS(HTTP Strict Transport Security)
  add_header Strict-Transport-Security &quot;max-age=31536000; includeSubdomains;&quot;;
}
</code></pre>

  </section>
  
</article>

</main>

</div>

<footer>
  <div class="container">
    <span class="copyright">&copy; 1999 Glenn Morton - <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
  </div>
</footer>

<script src="https://sandcastle.io/js/prism.js"></script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WRX2TXJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

</body>
</html>

